// Code generated by embed. DO NOT EDIT.

package templates

import (
	"crypto/sha1"
	"encoding/base64"
	"github.com/inabyte/embed/embedded"
	"os"
	"testing"
)

func TestFileServer(t *testing.T) {
	if FileHandler() == nil {
		t.Errorf("Call to FileServer did no return a handler")
	}
}

func TestBytes(t *testing.T) {
	FS.Walk("/", func(path string, info os.FileInfo, err error) error {
		if !info.IsDir() {
			linfo := info.(embedded.FileInfo)
			if getTag(linfo.Bytes()) != linfo.Tag() {
				t.Errorf("checksum for file %s doesn't match recorded", path)
			}
		}
		return nil
	})
}

func TestString(t *testing.T) {
	FS.Walk("/", func(path string, info os.FileInfo, err error) error {
		if !info.IsDir() {
			linfo := info.(embedded.FileInfo)
			s := linfo.String()
			if getTag([]byte(s)) != linfo.Tag() {
				t.Errorf("checksum for file %s doesn't match recorded {%s}", path, s)
			}
		}
		return nil
	})
}

func getTag(data []byte) string {
	hash := sha1.Sum(data)
	return base64.RawURLEncoding.EncodeToString(hash[:]) + "-gz"
}
